#pragma once

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#ifdef _cplusplus
extern "C" {
#endif

struct RVMessageAPIData;

#define RV_MESSAGE_API_VERSION 1

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Plugins can use the MessageAPI to subscribe to events and post data that is being requested

typedef struct RVMessageAPI {
    // Private internal data
    struct RVMessageAPIData* priv_data;
    void (*send)(struct RVMessageAPIData* priv_data, const unsigned char* data, int len);
} RVMessageAPI;

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#define RVMessageAPI_send(api, data, len) api->send(api->priv_data, data, len)
